<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kolorowanka dla Dzieci</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #87CEEB, #98FB98);
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
        }

        .app-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            padding: 20px;
            max-width: 900px;
            width: 100%;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .title {
            color: #FF6B6B;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 10px;
        }

        .main-content {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        .canvas-area {
            position: relative;
            background: white;
            border: 4px solid #FFD93D;
            border-radius: 15px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        #coloringCanvas {
            border-radius: 11px;
            cursor: crosshair;
            display: block;
        }

        .controls-panel {
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 200px;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        .tools-section {
            background: #F0F8FF;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #87CEEB;
        }

        .section-title {
            color: #4169E1;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }

        .tools {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tool-btn {
            background: white;
            border: 3px solid #DDD;
            border-radius: 12px;
            width: 55px;
            height: 55px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .tool-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .tool-btn.active {
            border-color: #FF6B6B;
            background: #FFE4E1;
            transform: scale(1.05);
        }

        .colors-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            justify-items: center;
        }

        .color-btn {
            width: 50px;
            height: 50px;
            border: 3px solid white;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(0,0,0,0.2);
        }

        .color-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .color-btn.selected {
            border-color: #333;
            border-width: 4px;
            transform: scale(1.1);
        }

        .brush-size {
            margin-top: 10px;
        }

        .size-slider {
            width: 100%;
            margin: 8px 0;
            background: #DDD;
            border-radius: 10px;
            outline: none;
            height: 8px;
        }

        .size-slider::-webkit-slider-thumb {
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #FF6B6B;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .current-image {
            text-align: center;
            margin: 10px 0;
            padding: 8px;
            background: #FFF8DC;
            border-radius: 10px;
            color: #8B4513;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
                align-items: center;
            }
            
            .controls-panel {
                order: -1;
                min-width: auto;
                width: 100%;
            }
            
            .tools-section {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .colors-grid {
                grid-template-columns: repeat(6, 1fr);
                max-width: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1 class="title">üé® Kolorowanka üé®</h1>
        </div>
        
        <div class="current-image" id="currentImage">Obrazek 1 z 5: Astronauta</div>
        
        <div class="main-content">
            <div class="canvas-area">
                <canvas id="coloringCanvas" width="500" height="400"></canvas>
            </div>
            
            <div class="controls-panel">
                <div class="navigation">
                    <button class="nav-btn" id="prevBtn" onclick="previousImage()">‚Üê</button>
                    <button class="nav-btn" id="nextBtn" onclick="nextImage()">‚Üí</button>
                </div>
                
                <div class="tools-section">
                    <div class="section-title">üõ†Ô∏è Narzƒôdzia</div>
                    <div class="tools">
                        <button class="tool-btn active" id="brushTool" onclick="selectTool('brush')" title="Pƒôdzel">üñåÔ∏è</button>
                        <button class="tool-btn" id="bucketTool" onclick="selectTool('bucket')" title="Wiadro">ü™£</button>
                        <button class="tool-btn" id="eraserTool" onclick="selectTool('eraser')" title="Gumka">üßΩ</button>
                    </div>
                    
                    <div class="brush-size">
                        <div style="text-align: center; color: #4169E1; font-weight: bold;">Grubo≈õƒá: <span id="sizeValue">15</span>px</div>
                        <input type="range" class="size-slider" id="brushSize" min="5" max="30" value="15" oninput="updateBrushSize()">
                    </div>
                </div>
                
                <div class="tools-section">
                    <div class="section-title">üåà Kolory</div>
                    <div class="colors-grid">
                        <div class="color-btn selected" style="background-color: #FF0000" onclick="selectColor('#FF0000')"></div>
                        <div class="color-btn" style="background-color: #00FF00" onclick="selectColor('#00FF00')"></div>
                        <div class="color-btn" style="background-color: #0000FF" onclick="selectColor('#0000FF')"></div>
                        <div class="color-btn" style="background-color: #FFFF00" onclick="selectColor('#FFFF00')"></div>
                        <div class="color-btn" style="background-color: #FF8000" onclick="selectColor('#FF8000')"></div>
                        <div class="color-btn" style="background-color: #FF0080" onclick="selectColor('#FF0080')"></div>
                        <div class="color-btn" style="background-color: #8000FF" onclick="selectColor('#8000FF')"></div>
                        <div class="color-btn" style="background-color: #00FFFF" onclick="selectColor('#00FFFF')"></div>
                        <div class="color-btn" style="background-color: #FFB6C1" onclick="selectColor('#FFB6C1')"></div>
                        <div class="color-btn" style="background-color: #90EE90" onclick="selectColor('#90EE90')"></div>
                        <div class="color-btn" style="background-color: #DDA0DD" onclick="selectColor('#DDA0DD')"></div>
                        <div class="color-btn" style="background-color: #F0E68C" onclick="selectColor('#F0E68C')"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Modu≈Ç 1: Silnik Renderowania i Interakcji
        class RenderEngine {
            constructor(canvasId) {
                this.canvas = document.getElementById(canvasId);
                this.ctx = this.canvas.getContext('2d');
                this.isDrawing = false;
                this.setupEventListeners();
            }

            setupEventListeners() {
                // Obs≈Çuga myszy
                this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));
                this.canvas.addEventListener('mousemove', (e) => this.draw(e));
                this.canvas.addEventListener('mouseup', () => this.stopDrawing());
                this.canvas.addEventListener('mouseout', () => this.stopDrawing());

                // Obs≈Çuga dotyku (mobilne)
                this.canvas.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const mouseEvent = new MouseEvent('mousedown', {
                        clientX: touch.clientX,
                        clientY: touch.clientY
                    });
                    this.canvas.dispatchEvent(mouseEvent);
                });

                this.canvas.addEventListener('touchmove', (e) => {
                    e.preventDefault();
                    const touch = e.touches[0];
                    const mouseEvent = new MouseEvent('mousemove', {
                        clientX: touch.clientX,
                        clientY: touch.clientY
                    });
                    this.canvas.dispatchEvent(mouseEvent);
                });

                this.canvas.addEventListener('touchend', (e) => {
                    e.preventDefault();
                    const mouseEvent = new MouseEvent('mouseup', {});
                    this.canvas.dispatchEvent(mouseEvent);
                });
            }

            getMousePos(e) {
                const rect = this.canvas.getBoundingClientRect();
                return {
                    x: e.clientX - rect.left,
                    y: e.clientY - rect.top
                };
            }

            startDrawing(e) {
                this.isDrawing = true;
                const pos = this.getMousePos(e);
                
                if (coloringApp.currentTool === 'bucket') {
                    coloringApp.floodFill(pos.x, pos.y);
                } else {
                    this.ctx.beginPath();
                    this.ctx.moveTo(pos.x, pos.y);
                }
            }

            draw(e) {
                if (!this.isDrawing || coloringApp.currentTool === 'bucket') return;
                
                const pos = this.getMousePos(e);
                
                this.ctx.globalCompositeOperation = coloringApp.currentTool === 'eraser' ? 'destination-out' : 'source-over';
                this.ctx.strokeStyle = coloringApp.currentColor;
                this.ctx.lineWidth = coloringApp.brushSize;
                this.ctx.lineCap = 'round';
                this.ctx.lineJoin = 'round';
                
                this.ctx.lineTo(pos.x, pos.y);
                this.ctx.stroke();
                this.ctx.beginPath();
                this.ctx.moveTo(pos.x, pos.y);
            }

            stopDrawing() {
                this.isDrawing = false;
                this.ctx.beginPath();
            }

            clear() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }

            drawImage(img) {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);
            }
        }

        // Modu≈Ç 2: Narzƒôdzia do Kolorowania
        class ColoringTools {
            static floodFill(ctx, startX, startY, fillColor) {
                const imageData = ctx.getImageData(0, 0, ctx.canvas.width, ctx.canvas.height);
                const data = imageData.data;
                const width = ctx.canvas.width;
                const height = ctx.canvas.height;
                
                const startPos = (Math.floor(startY) * width + Math.floor(startX)) * 4;
                const startR = data[startPos];
                const startG = data[startPos + 1];
                const startB = data[startPos + 2];
                const startA = data[startPos + 3];
                
                // Konwersja koloru wype≈Çnienia
                const fillRGB = this.hexToRgb(fillColor);
                
                // Je≈õli kolor jest taki sam, nie r√≥b nic
                if (startR === fillRGB.r && startG === fillRGB.g && startB === fillRGB.b) {
                    return;
                }
                
                const stack = [[Math.floor(startX), Math.floor(startY)]];
                const visited = new Set();
                
                while (stack.length > 0) {
                    const [x, y] = stack.pop();
                    const key = `${x},${y}`;
                    
                    if (visited.has(key) || x < 0 || x >= width || y < 0 || y >= height) {
                        continue;
                    }
                    
                    const pos = (y * width + x) * 4;
                    const r = data[pos];
                    const g = data[pos + 1];
                    const b = data[pos + 2];
                    const a = data[pos + 3];
                    
                    // Sprawd≈∫ czy piksel ma ten sam kolor co startowy
                    if (r !== startR || g !== startG || b !== startB || a !== startA) {
                        continue;
                    }
                    
                    visited.add(key);
                    
                    // Wype≈Çnij piksel
                    data[pos] = fillRGB.r;
                    data[pos + 1] = fillRGB.g;
                    data[pos + 2] = fillRGB.b;
                    data[pos + 3] = 255;
                    
                    // Dodaj sƒÖsiednie piksele
                    stack.push([x + 1, y]);
                    stack.push([x - 1, y]);
                    stack.push([x, y + 1]);
                    stack.push([x, y - 1]);
                }
                
                ctx.putImageData(imageData, 0, 0);
            }
            
            static hexToRgb(hex) {
                const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                return result ? {
                    r: parseInt(result[1], 16),
                    g: parseInt(result[2], 16),
                    b: parseInt(result[3], 16)
                } : null;
            }
        }

        // Modu≈Ç 4: ZarzƒÖdzanie Zasobami
        class ResourceManager {
            constructor() {
                this.images = [];
                this.currentImageIndex = 0;
                this.imageNames = [
                    'Astronauta',
                    'Piesek w Ogrodzie', 
                    'Koparka',
                    'Przyjazny Potworek',
                    'Ksiƒô≈ºniczka'
                ];
                this.generateImages();
            }

            generateImages() {
                const svgImages = [
                    // Astronauta
                    `<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="250" cy="120" r="60" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="235" cy="105" r="5" fill="black"/>
                        <circle cx="265" cy="105" r="5" fill="black"/>
                        <path d="M 230 130 Q 250 145 270 130" fill="none" stroke="black" stroke-width="3"/>
                        <rect x="200" y="180" width="100" height="120" rx="20" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="180" y="200" width="40" height="80" rx="15" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="280" y="200" width="40" height="80" rx="15" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="220" y="300" width="25" height="60" rx="10" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="255" y="300" width="25" height="60" rx="10" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="100" cy="80" r="15" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="380" cy="60" r="12" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="450" cy="120" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="50" cy="150" r="6" fill="none" stroke="black" stroke-width="3"/>
                    </svg>`,
                    
                    // Piesek
                    `<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="250" cy="200" rx="80" ry="60" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="250" cy="140" r="50" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="220" cy="110" rx="20" ry="30" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="280" cy="110" rx="20" ry="30" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="235" cy="130" r="5" fill="black"/>
                        <circle cx="265" cy="130" r="5" fill="black"/>
                        <ellipse cx="250" cy="155" rx="8" ry="6" fill="black"/>
                        <path d="M 240 170 Q 250 180 260 170" fill="none" stroke="black" stroke-width="3"/>
                        <rect x="200" y="260" width="15" height="50" rx="7" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="230" y="260" width="15" height="50" rx="7" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="255" y="260" width="15" height="50" rx="7" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="285" y="260" width="15" height="50" rx="7" fill="none" stroke="black" stroke-width="4"/>
                        <path d="M 330 180 Q 360 160 350 200 Q 340 220 330 200" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="120" cy="350" r="25" fill="none" stroke="black" stroke-width="3"/>
                        <rect x="100" y="325" width="40" height="5" fill="none" stroke="black" stroke-width="3"/>
                    </svg>`,
                    
                    // Koparka
                    `<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <rect x="150" y="200" width="120" height="80" rx="10" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="130" y="240" width="160" height="40" rx="15" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="160" cy="320" r="25" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="260" cy="320" r="25" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="180" y="160" width="60" height="40" rx="8" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="190" y="140" width="40" height="20" rx="5" fill="none" stroke="black" stroke-width="3"/>
                        <path d="M 270 220 L 350 160 L 420 180 L 400 220 L 350 240 L 320 260 L 270 240 Z" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="400" y="180" width="30" height="40" rx="5" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="200" cy="320" r="12" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="240" cy="320" r="12" fill="none" stroke="black" stroke-width="3"/>
                        <rect x="50" y="350" width="400" height="10" fill="none" stroke="black" stroke-width="3"/>
                    </svg>`,
                    
                    // Potworek
                    `<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="250" cy="200" rx="80" ry="100" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="220" cy="160" r="12" fill="black"/>
                        <circle cx="280" cy="160" r="12" fill="black"/>
                        <circle cx="210" cy="150" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="290" cy="150" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <path d="M 220 200 Q 250 230 280 200" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="235" y="210" width="8" height="15" fill="black"/>
                        <rect x="257" y="210" width="8" height="15" fill="black"/>
                        <ellipse cx="200" cy="120" rx="15" ry="25" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="300" cy="120" rx="15" ry="25" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="180" cy="240" rx="20" ry="40" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="320" cy="240" rx="20" ry="40" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="220" cy="320" rx="15" ry="35" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="280" cy="320" rx="15" ry="35" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="380" cy="80" r="20" fill="none" stroke="black" stroke-width="3"/>
                        <path d="M 360 60 L 380 40 L 400 60" fill="none" stroke="black" stroke-width="3"/>
                    </svg>`,
                    
                    // Ksiƒô≈ºniczka
                    `<svg width="500" height="400" viewBox="0 0 500 400" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="250" cy="140" r="45" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="235" cy="130" r="4" fill="black"/>
                        <circle cx="265" cy="130" r="4" fill="black"/>
                        <path d="M 235 155 Q 250 165 265 155" fill="none" stroke="black" stroke-width="3"/>
                        <path d="M 220 100 Q 250 80 280 100" fill="none" stroke="black" stroke-width="4"/>
                        <circle cx="235" cy="95" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="250" cy="85" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <circle cx="265" cy="95" r="8" fill="none" stroke="black" stroke-width="3"/>
                        <path d="M 200 180 Q 250 170 300 180 L 320 300 Q 250 310 180 300 Z" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="200" cy="220" rx="20" ry="40" fill="none" stroke="black" stroke-width="4"/>
                        <ellipse cx="300" cy="220" rx="20" ry="40" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="150" y="300" width="200" height="60" rx="30" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="120" y="340" width="260" height="20" rx="10" fill="none" stroke="black" stroke-width="4"/>
                        <rect x="200" y="280" width="15" height="40" rx="7" fill="none" stroke="black" stroke-width="3"/>
                        <rect x="285" y="280" width="15" height="40" rx="7" fill="none" stroke="black" stroke-width="3"/>
                    </svg>`
                ];

                svgImages.forEach((svgString, index) => {
                    const img = new Image();
                    const svgBlob = new Blob([svgString], {type: 'image/svg+xml'});
                    const url = URL.createObjectURL(svgBlob);
                    img.onload = () => {
                        URL.revokeObjectURL(url);
                        this.images[index] = img;
                        if (index === 0) {
                            coloringApp.renderer.drawImage(img);
                        }
                    };
                    img.src = url;
                });
            }

            getCurrentImage() {
                return this.images[this.currentImageIndex];
            }

            getCurrentImageName() {
                return this.imageNames[this.currentImageIndex];
            }

            nextImage() {
                this.currentImageIndex = (this.currentImageIndex + 1) % this.images.length;
                if (this.images[this.currentImageIndex]) {
                    coloringApp.renderer.drawImage(this.images[this.currentImageIndex]);
                }
                return this.currentImageIndex;
            }

            previousImage() {
                this.currentImageIndex = this.currentImageIndex === 0 ? this.images.length - 1 : this.currentImageIndex - 1;
                if (this.images[this.currentImageIndex]) {
                    coloringApp.renderer.drawImage(this.images[this.currentImageIndex]);
                }
                return this.currentImageIndex;
            }
        }

        // Modu≈Ç 3: Interfejs U≈ºytkownika i G≈Ç√≥wna Aplikacja
        class ColoringApp {
            constructor() {
                this.renderer = new RenderEngine('coloringCanvas');
                this.resourceManager = new ResourceManager();
                this.currentTool = 'brush';
                this.currentColor = '#FF0000';
                this.brushSize = 15;
                this.initializeUI();
            }

            initializeUI() {
                this.updateCurrentImageDisplay();
            }

            selectTool(tool) {
                this.currentTool = tool;
                
                // Update UI
                document.querySelectorAll('.tool-btn').forEach(btn => btn.classList.remove('active'));
                document.getElementById(tool + 'Tool').classList.add('active');
                
                // Update cursor
                const canvas = document.getElementById('coloringCanvas');
                if (tool === 'brush') {
                    canvas.style.cursor = 'crosshair';
                } else if (tool === 'bucket') {
                    canvas.style.cursor = 'pointer';
                } else if (tool === 'eraser') {
                    canvas.style.cursor = 'grab';
                }
            }

            selectColor(color) {
                this.currentColor = color;
                
                // Update UI
                document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('selected'));
                event.target.classList.add('selected');
            }

            updateBrushSize() {
                this.brushSize = document.getElementById('brushSize').value;
                document.getElementById('sizeValue').textContent = this.brushSize;
            }

            floodFill(x, y) {
                ColoringTools.floodFill(this.renderer.ctx, x, y, this.currentColor);
            }

            nextImage() {
                const newIndex = this.resourceManager.nextImage();
                this.updateCurrentImageDisplay();
            }

            previousImage() {
                const newIndex = this.resourceManager.previousImage();
                this.updateCurrentImageDisplay();
            }

            updateCurrentImageDisplay() {
                const currentNum = this.resourceManager.currentImageIndex + 1;
                const total = this.resourceManager.images.length;
                const name = this.resourceManager.getCurrentImageName();
                document.getElementById('currentImage').textContent = `Obrazek ${currentNum} z ${total}: ${name}`;
            }
        }

        // Inicjalizacja aplikacji
        let coloringApp;
        
        window.onload = function() {
            coloringApp = new ColoringApp();
        };

        // Globalne funkcje dla przycisk√≥w
        function selectTool(tool) {
            coloringApp.selectTool(tool);
        }

        function selectColor(color) {
            coloringApp.selectColor(color);
        }

        function updateBrushSize() {
            coloringApp.updateBrushSize();
        }

        function nextImage() {
            coloringApp.nextImage();
        }

        function previousImage() {
            coloringApp.previousImage();
        }
    </script>
</body>
</html>